/**
 * Glass Blur & Frosted Glass Effects
 * macOS-style glass and blur effects with fallbacks
 */

:root {
  /* ===== BLUR VALUES ===== */
  
  /* Standard blur amounts */
  --blur-subtle: 4px;
  --blur-light: 8px;
  --blur-medium: 12px;
  --blur-strong: 16px;
  --blur-heavy: 20px;
  --blur-extreme: 24px;
  
  /* Component-specific blur */
  --blur-glass-light: 8px;              /* Light glass effect */
  --blur-glass-medium: 12px;            /* Medium glass effect */
  --blur-glass-heavy: 16px;             /* Heavy glass effect */
  --blur-backdrop: 20px;                /* Modal backdrops */
  --blur-overlay: 16px;                 /* Overlay effects */
  --blur-sidebar: 12px;                 /* Sidebar glass */
  --blur-header: 8px;                   /* Header glass */
  --blur-card: 6px;                     /* Card glass */
  
  /* ===== GLASS BACKGROUND COLORS ===== */
  
  /* Light mode glass backgrounds */
  --glass-white-10: rgba(255, 255, 255, 0.1);
  --glass-white-20: rgba(255, 255, 255, 0.2);
  --glass-white-30: rgba(255, 255, 255, 0.3);
  --glass-white-40: rgba(255, 255, 255, 0.4);
  --glass-white-50: rgba(255, 255, 255, 0.5);
  --glass-white-60: rgba(255, 255, 255, 0.6);
  --glass-white-70: rgba(255, 255, 255, 0.7);
  --glass-white-80: rgba(255, 255, 255, 0.8);
  --glass-white-90: rgba(255, 255, 255, 0.9);
  
  /* Dark mode glass backgrounds */
  --glass-black-10: rgba(0, 0, 0, 0.1);
  --glass-black-20: rgba(0, 0, 0, 0.2);
  --glass-black-30: rgba(0, 0, 0, 0.3);
  --glass-black-40: rgba(0, 0, 0, 0.4);
  --glass-black-50: rgba(0, 0, 0, 0.5);
  --glass-black-60: rgba(0, 0, 0, 0.6);
  --glass-black-70: rgba(0, 0, 0, 0.7);
  --glass-black-80: rgba(0, 0, 0, 0.8);
  --glass-black-90: rgba(0, 0, 0, 0.9);
  
  /* Colored glass backgrounds */
  --glass-blue-20: rgba(0, 122, 255, 0.2);
  --glass-blue-30: rgba(0, 122, 255, 0.3);
  --glass-green-20: rgba(52, 199, 89, 0.2);
  --glass-green-30: rgba(52, 199, 89, 0.3);
  --glass-red-20: rgba(255, 59, 48, 0.2);
  --glass-red-30: rgba(255, 59, 48, 0.3);
  --glass-yellow-20: rgba(255, 204, 0, 0.2);
  --glass-yellow-30: rgba(255, 204, 0, 0.3);
  
  /* ===== GLASS BORDERS ===== */
  
  --glass-border-light: rgba(255, 255, 255, 0.2);
  --glass-border-medium: rgba(255, 255, 255, 0.3);
  --glass-border-strong: rgba(255, 255, 255, 0.4);
  
  /* ===== COMPONENT-SPECIFIC GLASS STYLES ===== */
  
  /* Modal glass */
  --glass-modal-bg: var(--glass-white-80);
  --glass-modal-border: var(--glass-border-light);
  --glass-modal-blur: var(--blur-backdrop);
  
  /* Sidebar glass */
  --glass-sidebar-bg: var(--glass-white-70);
  --glass-sidebar-border: var(--glass-border-light);
  --glass-sidebar-blur: var(--blur-sidebar);
  
  /* Header glass */
  --glass-header-bg: var(--glass-white-60);
  --glass-header-border: var(--glass-border-light);
  --glass-header-blur: var(--blur-header);
  
  /* Card glass */
  --glass-card-bg: var(--glass-white-50);
  --glass-card-border: var(--glass-border-light);
  --glass-card-blur: var(--blur-card);
  
  /* Overlay glass */
  --glass-overlay-bg: var(--glass-black-40);
  --glass-overlay-blur: var(--blur-overlay);
}

/* ===== DARK MODE GLASS OVERRIDES ===== */

@media (prefers-color-scheme: dark) {
  :root {
    /* Dark mode glass backgrounds */
    --glass-modal-bg: var(--glass-black-60);
    --glass-sidebar-bg: var(--glass-black-50);
    --glass-header-bg: var(--glass-black-40);
    --glass-card-bg: var(--glass-black-30);
    --glass-overlay-bg: var(--glass-black-60);
    
    /* Dark mode glass borders */
    --glass-border-light: rgba(255, 255, 255, 0.1);
    --glass-border-medium: rgba(255, 255, 255, 0.15);
    --glass-border-strong: rgba(255, 255, 255, 0.2);
    
    --glass-modal-border: var(--glass-border-light);
    --glass-sidebar-border: var(--glass-border-light);
    --glass-header-border: var(--glass-border-light);
    --glass-card-border: var(--glass-border-light);
  }
}

/* ===== GLASS EFFECT BASE CLASSES ===== */

/* Base glass mixin */
.glass-base {
  backdrop-filter: blur(var(--blur-glass-medium));
  -webkit-backdrop-filter: blur(var(--blur-glass-medium));
  border: 1px solid var(--glass-border-light);
}

/* Glass effect variations */
.glass-light {
  background: var(--glass-white-30);
  backdrop-filter: blur(var(--blur-light));
  -webkit-backdrop-filter: blur(var(--blur-light));
  border: 1px solid var(--glass-border-light);
}

.glass-medium {
  background: var(--glass-white-50);
  backdrop-filter: blur(var(--blur-medium));
  -webkit-backdrop-filter: blur(var(--blur-medium));
  border: 1px solid var(--glass-border-medium);
}

.glass-heavy {
  background: var(--glass-white-70);
  backdrop-filter: blur(var(--blur-strong));
  -webkit-backdrop-filter: blur(var(--blur-strong));
  border: 1px solid var(--glass-border-strong);
}

/* ===== COMPONENT-SPECIFIC GLASS CLASSES ===== */

/* Modal glass */
.glass-modal {
  background: var(--glass-modal-bg);
  backdrop-filter: blur(var(--glass-modal-blur));
  -webkit-backdrop-filter: blur(var(--glass-modal-blur));
  border: 1px solid var(--glass-modal-border);
}

/* Sidebar glass */
.glass-sidebar {
  background: var(--glass-sidebar-bg);
  backdrop-filter: blur(var(--glass-sidebar-blur));
  -webkit-backdrop-filter: blur(var(--glass-sidebar-blur));
  border-right: 1px solid var(--glass-sidebar-border);
}

/* Header glass */
.glass-header {
  background: var(--glass-header-bg);
  backdrop-filter: blur(var(--glass-header-blur));
  -webkit-backdrop-filter: blur(var(--glass-header-blur));
  border-bottom: 1px solid var(--glass-header-border);
}

/* Card glass */
.glass-card {
  background: var(--glass-card-bg);
  backdrop-filter: blur(var(--glass-card-blur));
  -webkit-backdrop-filter: blur(var(--glass-card-blur));
  border: 1px solid var(--glass-card-border);
}

/* Overlay glass */
.glass-overlay {
  background: var(--glass-overlay-bg);
  backdrop-filter: blur(var(--glass-overlay-blur));
  -webkit-backdrop-filter: blur(var(--glass-overlay-blur));
}

/* ===== FROSTED GLASS VARIATIONS ===== */

/* Frosted glass with noise texture */
.frosted-glass {
  background: var(--glass-white-60);
  backdrop-filter: blur(var(--blur-medium)) saturate(1.2);
  -webkit-backdrop-filter: blur(var(--blur-medium)) saturate(1.2);
  border: 1px solid var(--glass-border-medium);
  position: relative;
}

.frosted-glass::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(circle at 1px 1px, rgba(255,255,255,0.15) 1px, transparent 0);
  background-size: 20px 20px;
  pointer-events: none;
  border-radius: inherit;
}

/* Frosted glass variations */
.frosted-light {
  background: var(--glass-white-40);
  backdrop-filter: blur(var(--blur-light)) saturate(1.1);
  -webkit-backdrop-filter: blur(var(--blur-light)) saturate(1.1);
}

.frosted-medium {
  background: var(--glass-white-60);
  backdrop-filter: blur(var(--blur-medium)) saturate(1.2);
  -webkit-backdrop-filter: blur(var(--blur-medium)) saturate(1.2);
}

.frosted-heavy {
  background: var(--glass-white-80);
  backdrop-filter: blur(var(--blur-strong)) saturate(1.3);
  -webkit-backdrop-filter: blur(var(--blur-strong)) saturate(1.3);
}

/* ===== COLORED GLASS EFFECTS ===== */

.glass-blue {
  background: var(--glass-blue-20);
  backdrop-filter: blur(var(--blur-medium));
  -webkit-backdrop-filter: blur(var(--blur-medium));
  border: 1px solid rgba(0, 122, 255, 0.3);
}

.glass-green {
  background: var(--glass-green-20);
  backdrop-filter: blur(var(--blur-medium));
  -webkit-backdrop-filter: blur(var(--blur-medium));
  border: 1px solid rgba(52, 199, 89, 0.3);
}

.glass-red {
  background: var(--glass-red-20);
  backdrop-filter: blur(var(--blur-medium));
  -webkit-backdrop-filter: blur(var(--blur-medium));
  border: 1px solid rgba(255, 59, 48, 0.3);
}

.glass-yellow {
  background: var(--glass-yellow-20);
  backdrop-filter: blur(var(--blur-medium));
  -webkit-backdrop-filter: blur(var(--blur-medium));
  border: 1px solid rgba(255, 204, 0, 0.3);
}

/* ===== GLASS HOVER EFFECTS ===== */

.glass-hover {
  transition: all var(--duration-normal) var(--ease-out);
}

.glass-hover:hover {
  background: var(--glass-white-60);
  backdrop-filter: blur(var(--blur-strong));
  -webkit-backdrop-filter: blur(var(--blur-strong));
  border-color: var(--glass-border-medium);
  transform: translateY(-1px);
}

/* ===== GLASS ANIMATION EFFECTS ===== */

@keyframes glass-fade-in {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
    -webkit-backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(var(--blur-medium));
    -webkit-backdrop-filter: blur(var(--blur-medium));
  }
}

.glass-fade-in {
  animation: glass-fade-in var(--duration-slow) var(--ease-out);
}

/* ===== FALLBACKS FOR UNSUPPORTED BROWSERS ===== */

/* Fallback for browsers that don't support backdrop-filter */
@supports not (backdrop-filter: blur(1px)) {
  .glass-light,
  .glass-medium,
  .glass-heavy,
  .glass-modal,
  .glass-sidebar,
  .glass-header,
  .glass-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border-primary);
    box-shadow: var(--shadow-md);
  }
  
  .glass-overlay {
    background: rgba(0, 0, 0, 0.5);
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Use will-change for elements that will have glass effects */
.glass-optimized {
  will-change: backdrop-filter, background-color, border-color;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  .glass-hover {
    transition: none;
  }
  
  .glass-fade-in {
    animation: none;
  }
}

/* ===== OCR APP SPECIFIC GLASS EFFECTS ===== */

/* OCR Modal glass */
.glass-ocr-modal {
  background: var(--glass-white-85);
  backdrop-filter: blur(20px) saturate(1.2);
  -webkit-backdrop-filter: blur(20px) saturate(1.2);
  border: 1px solid var(--glass-border-medium);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
}

/* Screenshot overlay glass */
.glass-screenshot-overlay {
  background: var(--glass-black-20);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Settings panel glass */
.glass-settings-panel {
  background: var(--glass-white-75);
  backdrop-filter: blur(16px) saturate(1.1);
  -webkit-backdrop-filter: blur(16px) saturate(1.1);
  border: 1px solid var(--glass-border-light);
}

/* History sidebar glass */
.glass-history-sidebar {
  background: var(--glass-white-70);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-right: 1px solid var(--glass-border-light);
}

/* Template card glass */
.glass-template-card {
  background: var(--glass-white-40);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid var(--glass-border-light);
  transition: all var(--duration-normal) var(--ease-out);
}

.glass-template-card:hover {
  background: var(--glass-white-60);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-color: var(--glass-border-medium);
  transform: translateY(-2px);
}